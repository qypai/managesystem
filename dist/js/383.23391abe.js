"use strict";(self["webpackChunkmanagement"]=self["webpackChunkmanagement"]||[]).push([[383],{5805:function(e,t,a){a.d(t,{Z:function(){return u}});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",e._l(e.tags,(function(t,n){return a("el-tag",{key:t.path,attrs:{closable:"","disable-transitions":!1,size:"mini",effect:e.light(t)},on:{close:function(a){return e.handleClose(t,n)},click:function(a){return e.change(t,n)}}},[e._v(" "+e._s(t.label)+" ")])})),1)},o=[],r={name:"tags",data(){return{}},computed:{tags(){return this.$store.state.tab.tabsList}},methods:{handleClose(e,t){const a=this.$store.state.tab.tabsList;if(0==t)this.$message.error("不可移除");else{a.splice(t,1);const n=a.length-1;this.$router.push({name:a[n].name}),this.$store.commit("updateclose",e)}},light(e){return this.$route.name===e.name?"dark":"plain"},change(e,t){const a=this.$store.state.tab.tabsList,n=a[t].name;this.$router.push({name:n}),this.$store.commit("headermenu",e)}}},l=r,s=a(1001),i=(0,s.Z)(l,n,o,!1,null,null,null),u=i.exports},8383:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("tags"),a("div",{staticClass:"manage-header"},[a("el-button",{attrs:{type:"button",size:"mini"},on:{click:e.adduser}},[e._v("+新增")]),a("div",{staticClass:"search"},[a("commonform",{attrs:{form:e.searchform,formLabel:e.sformlabel,inline:!0}}),a("el-button",{attrs:{type:"button",size:"mini"},on:{click:e.search}},[e._v("搜索")])],1)],1),a("el-dialog",{attrs:{title:!0===e.add?"新增书本":"编辑书本",visible:e.dialogVisible,width:"45%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("commonform",{attrs:{form:e.operateform,formLabel:e.operateFormLabel,inline:!0}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1),a("commontable",{attrs:{tableData:e.tablebookData,tableLabel:e.tablelabel},on:{delete:e.Delete,updateb:e.upDateb}})],1)},o=[],r=a(7303),l=a(5805),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",attrs:{"label-width":"70px",model:e.form,inline:e.inline,size:"mini"}},[e._l(e.formLabel,(function(t){return a("el-form-item",{key:t.label,attrs:{label:t.label}},["input"===t.type?a("el-input",{attrs:{placeholder:"请输入"+t.label},model:{value:e.form[t.model],callback:function(a){e.$set(e.form,t.model,a)},expression:"form[item.model]"}}):e._e(),"select"===t.type?a("el-select",{attrs:{placeholder:"请选择"+t.label}},e._l(t.opts,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),"date"===t.type?a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form[t.model],callback:function(a){e.$set(e.form,t.model,a)},expression:"form[item.model]"}}):e._e()],1)})),a("el-form-item",[e._t("default")],2)],2)},i=[],u={name:"commonform",props:{formLabel:Array,form:Object,inline:Boolean},data(){return{}}},c=u,d=a(1001),m=(0,d.Z)(c,s,i,!1,null,null,null),p=m.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{attrs:{data:e.tableData,stripe:""}},[e._l(e.tableLabel,(function(t){return a("el-table-column",{key:t.prop,attrs:{"show-overflow-tooltip":"",label:t.label,width:"180"},scopedSlots:e._u([{key:"default",fn:function(n){return[a("span",[e._v(e._s(n.row[t.prop]))])]}}],null,!0)})})),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.row,t.$index)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row,t.$index)}}},[e._v("删除")])]}}])})],2)],1)},f=[],h={name:"commontable",props:{tableData:Array,tableLabel:Array},data(){return{}},methods:{handleDelete(e,t){this.$confirm("此操作将永久删除该内容, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const a=e.id,n=t;this.$emit("delete",{num:a,ind:n}),this.$message({type:"success",message:"删除成功!"})}))},handleEdit(e,t){const a=t;this.$store.state.tab.editdata=e,this.$store.state.tab.editindex=a,this.$emit("updateb")}}},g=h,$=(0,d.Z)(g,b,f,!1,null,null,null),v=$.exports,k={name:"User",components:{tags:l.Z,commonform:p,commontable:v},mounted(){this.getdata()},data(){return{operateFormLabel:[{model:"name",label:"书名",type:"input"},{model:"alias",label:"英文书名",type:"input"}],operateform:{name:"",alias:""},add:!0,dialogVisible:!1,sformlabel:[{model:"keyword",label:"",type:"input"}],searchform:{keyword:""},tablebookData:[],tablelabel:[{prop:"name",label:"书名"},{prop:"alias",label:"英文书名"}]}},methods:{getdata(){(0,r.hx)().then((e=>{const{data:t,status:a}=e.data;0==a&&(this.tablebookData=t)}))},confirm(){if(this.add)(0,r.b$)(this.operateform.name,this.operateform.alias).then((()=>{this.getdata(),this.dialogVisible=!1}));else{const e=this.$store.state.tab.editdata.id,t=this.$store.state.tab.editindex,a=this.tablebookData,n=this.operateform.name,o=this.operateform.alias;(0,r.Kd)(n,o,e).then(this.$set(a,t,{name:n,alias:o})),this.dialogVisible=!1}},Delete(e){(0,r.Fi)(e.num).then(this.tablebookData.splice(e.ind,1))},upDateb(){this.dialogVisible=!0,this.add=!1,this.operateform={name:this.$store.state.tab.editdata.name,alias:this.$store.state.tab.editdata.alias}},search(){},adduser(){this.dialogVisible=!0,this.add=!0,this.operateform={name:"",alias:""}}}},_=k,y=(0,d.Z)(_,n,o,!1,null,"068b91b8",null),w=y.exports},7303:function(e,t,a){a.d(t,{b$:function(){return d},Fi:function(){return m},Yu:function(){return u},hx:function(){return c},Hl:function(){return f},Kd:function(){return b}});var n=a(6166),o=a.n(n),r={baseUrl:{dev:"/api/",pro:""}};r.baseUrl.pro;class l{constructor(e){this.baseUrl=e}getInsideConfig(){const e={baseUrl:this.baseUrl,header:{}};return e}interceptors(e){e.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),o().interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}))}request(e){const t=o().create();return e={...this.getInsideConfig(),...e},this.interceptors(t),t(e)}}var s=new l;function i(e,t,a){return"get"==t?s.request({url:e,method:"get",data:a}):s.request({url:e,method:"post",data:a,headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(e){let t="";for(let a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}]})}const u=()=>{const e="/home/getData",t="get";return i(e,t)},c=e=>s.request({url:"http://127.0.0.1:3007/api/article/cates",method:"get",data:e}),d=(e,t)=>{const a="http://127.0.0.1:3007/api/article/addcates",n="post",o={name:e,alias:t};return i(a,n,o)},m=e=>s.request({url:`http://127.0.0.1:3007/api/article/deletecate/${e}`,method:"get"}),p="http://127.0.0.1:3007/api/article",b=(e,t,a)=>s.request({url:`${p}/updatecate`,method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{name:e,alias:t,Id:a},transformRequest:[function(e){let t="";for(let a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}]}),f=(e,t)=>{const a="http://127.0.0.1:3007/api/login",n="post",o={username:e,password:t};return i(a,n,o)}}}]);
//# sourceMappingURL=383.23391abe.js.map